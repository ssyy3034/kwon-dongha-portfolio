---
date: 2025-11-01
tags: [Network]
---

네, 알겠습니다. 제공해주신 내용에서 숫자 인용을 모두 제거하고 문맥이 자연스럽게 이어지도록 다시 정리해 드리겠습니다. 옵시디언 노트에 바로 사용하실 수 있습니다.

---

# 11.5 웹 서버 (Web Servers)

## 11.5.1 웹의 기초 (Web Basics)

웹 클라이언트(브라우저)와 서버는 **HTTP(Hypertext Transfer Protocol)**라는 텍스트 기반의 애플리케이션 레벨 프로토콜을 사용하여 상호작용합니다.

- **기본 동작**:
    
    1. 웹 브라우저는 서버에 인터넷 연결을 엽니다.
        
    2. 특정 콘텐츠를 요청합니다.
        
    3. 서버는 요청된 콘텐츠로 응답한 뒤 연결을 닫습니다.
        
    4. 브라우저는 콘텐츠를 읽어 화면에 표시합니다.
        
- 웹과 기존 파일 서비스(FTP 등)의 차이점:
    
    웹 콘텐츠는 **HTML(Hypertext Markup Language)**로 작성될 수 있다는 점이 가장 큰 차이입니다. HTML 페이지는 브라우저에게 텍스트와 그래픽 객체를 어떻게 표시할지 지시하는 **태그(tag)**를 포함합니다. HTML의 가장 강력한 기능은 인터넷 상의 어떤 호스트에 저장된 콘텐츠로든 연결될 수 있는 **하이퍼링크(hyperlink)**를 포함할 수 있다는 점입니다.
    
    HTML
    
    ```
    <a href="http://www.cmu.edu/index.html">Carnegie Mellon</a>
    ```
    

## 11.5.2 웹 콘텐츠 (Web Content)

웹 클라이언트와 서버에게 콘텐츠는 **MIME(Multipurpose Internet Mail Extensions) 타입**과 연관된 바이트 시퀀스입니다.

|**MIME 타입**|**설명**|
|---|---|
|`text/html`|HTML 페이지|
|`text/plain`|서식이 없는 텍스트|
|`image/gif`|GIF 형식의 바이너리 이미지|
|`image/png`|PNG 형식의 바이너리 이미지|
|`image/jpeg`|JPEG 형식의 바이너리 이미지|

웹 서버는 두 가지 방식으로 콘텐츠를 제공합니다:

1. **정적 콘텐츠 (Static Content)**: 디스크 파일을 가져와 그 내용을 클라이언트에게 반환합니다.
    
2. **동적 콘텐츠 (Dynamic Content)**: 실행 파일을 실행하고 그 결과를 클라이언트에게 반환합니다.
    

서버가 반환하는 모든 콘텐츠는 **URL(Universal Resource Locator)**이라는 고유한 이름을 가진 파일과 연관됩니다.

- **URL 예시**: `http://www.google.com:80/index.html`
    
    - 클라이언트는 접두사(`http://www.google.com:80`)를 사용하여 서버의 종류, 위치, 포트를 파악합니다.
        
    - 서버는 접미사(`/index.html`)를 사용하여 파일 시스템에서 파일을 찾고, 요청이 정적인지 동적인지 판단합니다.
        
- **URL의 동적 인자**: `?` 문자로 파일명과 인자를 구분하고, `&` 문자로 각 인자를 구분합니다.
    
    - 예시: `http://.../adder?15000&213`
        

## 11.5.3 HTTP 트랜잭션 (HTTP Transactions)

HTTP는 텍스트 기반 프로토콜이므로, `telnet` 같은 프로그램을 사용하여 웹 서버와 직접 통신하며 디버깅할 수 있습니다.

### HTTP 요청 (HTTP Request)

HTTP 요청은 다음 세 부분으로 구성됩니다:

1. **요청 라인 (Request Line)**
    
2. 0개 이상의 **요청 헤더 (Request Headers)**
    
3. 헤더의 끝을 알리는 **빈 줄 (Empty Line)**
    

- **요청 라인 형식**: `method URI version`
    
    - `method`: `GET`, `POST`, `HEAD` 등. `GET`은 URI가 식별하는 콘텐츠를 생성하고 반환하라고 서버에 지시합니다.
        
    - `URI`: URL의 접미사 부분으로, 파일명과 선택적 인자를 포함합니다.
        
    - `version`: `HTTP/1.0` 또는 `HTTP/1.1`.
        
- **요청 헤더**: `header-name: header-data` 형식이며, 서버에 추가 정보를 제공합니다. `Host` 헤더는 HTTP/1.1 요청에 필수적입니다.
    

### HTTP 응답 (HTTP Response)

HTTP 응답은 요청과 유사한 구조를 가집니다:

1. **응답 라인 (Response Line)**
    
2. 0개 이상의 **응답 헤더 (Response Headers)**
    
3. 헤더의 끝을 알리는 **빈 줄 (Empty Line)**
    
4. **응답 본문 (Response Body)**
    

- **응답 라인 형식**: `version status-code status-message`
    
    - `status-code`: 요청의 처리 결과를 나타내는 3자리 숫자입니다.
        
- **주요 상태 코드**:
    

|**상태 코드**|**상태 메시지**|**설명**|
|---|---|---|
|`200`|`OK`|요청이 성공적으로 처리됨|
|`301`|`Moved Permanently`|콘텐츠가 영구적으로 이동됨|
|`400`|`Bad Request`|서버가 요청을 이해할 수 없음|
|`403`|`Forbidden`|서버가 요청된 파일에 접근할 권한이 없음|
|`404`|`Not Found`|서버가 요청된 파일을 찾을 수 없음|
|`501`|`Not Implemented`|서버가 요청 메소드를 지원하지 않음|
|`505`|`HTTP Version Not Supported`|서버가 요청된 HTTP 버전을 지원하지 않음|

- **응답 헤더**: 응답에 대한 추가 정보를 제공합니다.
    
    - `Content-Type`: 응답 본문에 있는 콘텐츠의 MIME 타입을 알려줍니다.
        
    - `Content-Length`: 응답 본문의 크기를 바이트 단위로 나타냅니다.
        

## 11.5.4 동적 콘텐츠 제공 (Serving Dynamic Content)

서버가 동적 콘텐츠를 제공할 때 클라이언트, 서버, 그리고 서버가 실행하는 자식 프로세스(CGI 프로그램) 간의 정보 전달은 **CGI(Common Gateway Interface)**라는 표준을 따릅니다.

- **클라이언트 → 서버로 인자 전달**:
    
    - `GET` 요청의 인자는 URI에 포함되어 전달됩니다.
        
- **서버 → 자식 프로세스로 인자 전달**:
    
    - 서버는 `fork`로 자식 프로세스를 생성하고 `execve`로 CGI 프로그램을 실행합니다.
        
    - `execve`를 호출하기 전에, 서버는 **`QUERY_STRING`** 이라는 **환경 변수**에 URI에서 추출한 인자 문자열을 설정합니다. CGI 프로그램은 `getenv` 함수를 통해 이 값을 참조할 수 있습니다.
        
- **서버 → 자식 프로세스로 기타 정보 전달**:
    
    - CGI는 `SERVER_PORT`, `REQUEST_METHOD` 등 다양한 환경 변수를 정의하며, 서버는 이 변수들을 설정하여 자식에게 추가 정보를 전달합니다.
        
- **자식 프로세스 → 클라이언트로 출력 전달**:
    
    - CGI 프로그램은 동적 콘텐츠를 자신의 **표준 출력(standard output)**으로 보냅니다.
        
    - 부모 프로세스(서버)는 `execve`를 호출하기 전에, 자식의 표준 출력을 클라이언트와 연결된 **연결 소켓 디스크립터로 리디렉션(redirection)**합니다 (`dup2` 함수 사용).
        
    - 결과적으로 CGI 프로그램이 표준 출력으로 쓰는 모든 것은 클라이언트에게 직접 전송됩니다.
        
    - **중요**: 부모는 자식이 생성할 콘텐츠의 타입이나 크기를 모르므로, `Content-type`과 `Content-length` 같은 응답 헤더를 생성하는 것은 **자식 CGI 프로그램의 책임**입니다.