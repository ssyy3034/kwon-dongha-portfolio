---
date: 2025-12-15
tags: [Algorithm]
---


## [Project Fork-Lore: 기능 및 기술 구현 정의서]

### 1. 플랫폼 기저 및 데이터 관리 (Platform Core)

| **기능명**       | **세부 기능**                   | **핵심 기술 및 구현 로직**                                                         |
| ------------- | --------------------------- | ------------------------------------------------------------------------- |
| **로컬 워크스페이스** | 사용자 로컬 마크다운 폴더 연동 및 실시간 동기화 | **File System Access API**를 이용한 직접 I/O 제어 및 **IndexedDB**를 통한 폴더 핸들 영속화   |
| **지능형 에디터**   | 마크다운 기반의 엔티티/복선 인터랙티브 태깅    | **Tiptap (ProseMirror)** 기반 커스텀 노드 설계 및 마크다운 AST(Abstract Syntax Tree) 파싱 |
| **증분 인덱서**    | 변경된 파일만 식별하여 고속 데이터 인덱싱     | 파일의 `lastModified` 타임스탬프 비교 로직 및 **Web Worker**를 통한 비동기 파일 스캐닝            |
| **로컬 지식 DB**  | 서사 엔티티 및 상태 데이터의 로컬 저장      | **SQLite Wasm**과 **Drizzle ORM**을 연동하여 브라우저 내 관계형 쿼리 처리                   |

---

### 2. 서사 지능 및 정합성 제어 (Narrative Intelligence)

| **기능명**        | **세부 기능**                       | **핵심 기술 및 구현 로직**                                                                |     |     |       |
| -------------- | ------------------------------- | -------------------------------------------------------------------------------- | --- | --- | ----- |
| **지식 자동 습득**   | 인물별 노출 정보에 따른 개별 지식 데이터베이스 업데이트 | **Event-based State Transition** 모델링 및 장면 참여자 기반 지식 그래프(Knowledge Graph) 엣지 생성   |     |     |       |
| **복선 생명주기 관리** | 복선의 생성, 유지, 회수를 추적하여 유실 방지      | **FSM(Finite State Machine)** 기반 상태 관리 및 **SQL Trigger**를 통한 논리적 모순 자동 탐지        |     |     |       |
| **페르소나 정렬**    | 캐릭터 성격과 현재 대사/행동의 일치도 검증        | **Amazon Titan Embedding**을 활용한 벡터화 및 코사인 유사도($\cos \theta = \frac{A \cdot B}{\\ | A\\ | \\  | $) 계산 |
| **개연성 추론**     | 사건의 결과가 전제 조건을 충족하는지 논리적 검토     | **AWS Bedrock (Claude 3.5 Sonnet)**의 Chain-of-Thought 프롬프팅 및 Spring 기반 사후 검증 엔진  |     |     |       |

---

### 3. 크리에이티브 시각화 및 지원 (Visual Support)

| **기능명**        | **세부 기능**                   | **핵심 기술 및 구현 로직**                                                                        |
| -------------- | --------------------------- | ---------------------------------------------------------------------------------------- |
| **인물 관계 그래프**  | 시점별 인물 간 관계 수치 및 연결 상태 시각화  | **React-force-graph (Three.js)**를 이용한 고성능 네트워크 렌더링 및 Temporal Slider 연동                  |
| **AI 배경 파노라마** | 장면 묘사 기반 360도 배경 아트 생성 및 적용 | **Bedrock Titan Image Generator** API 연동 및 CSS `transform-style: preserve-3d` 기반 파노라마 뷰어 |
| **서재 대시보드**    | 프로젝트별 지표 분석 및 표지 이미지 관리     | **Chart.js**를 이용한 서사 통계 시각화 및 프로젝트별 메타데이터 마이크로 서비스 설계                                    |
| **세계관 지도**     | 지명 간 거리 및 이동 동선 기반의 지형도 생성  | **Graph-based Pathfinding (Dijkstra)** 알고리즘 기반의 위치 관계 자동 배치 및 2D Canvas 렌더링              |

---

### 4. 분석 및 독자 시뮬레이션 (Analytics)

|**기능명**|**세부 기능**|**핵심 기술 및 구현 로직**|
|---|---|---|
|**감정 곡선 추적**|문장 단위 감성 분석을 통한 서사 텐션 시각화|**Natural Language Processing (NLP)** 감성 사전을 활용한 스코어링 및 시계열 데이터 가시화|
|**서사적 가독성 린트**|독자 피로도 및 문장 난이도 수치화|**Flesch-Kincaid 가독성 지수** 알고리즘 적용 및 실시간 가독성 하이라이팅|
|**복선 회수 대시보드**|미회수 복선의 서사적 위험도(Risk) 평가|전역 상태 트리 스캔 및 장르별 필수 복선 패턴 매칭 알고리즘|

---

## [구현 우선순위 및 리스크 관리]

1. **Phase 1 (Critical):** 로컬 파일 I/O 및 SQLite 기반 지식 저장소 구축 (1~2주차)
    
2. **Phase 2 (Logic):** Spring 백엔드와 Bedrock 연동을 통한 서사 린터 구현 (3주차)
    
3. **Phase 3 (Expansion):** 그래프 시각화 및 AI 배경 생성 모듈 통합 (4주차)
    
4. **Phase 4 (Product):** 서재 대시보드 및 최종 UI/UX 최적화 (5주차)
    

**공학적 통찰:** 본 플랫폼의 경쟁력은 AI가 생성하는 텍스트 자체가 아니라, 생성된 텍스트가 **기존의 데이터와 어떤 논리적 관계를 맺는지 검증하는 시스템적 안정성**에 있습니다. 따라서 1, 2단계의 데이터 파이프라인 정합성 확보가 전체 프로젝트의 성공을 결정짓는 임계 경로(Critical Path)가 될 것입니다.

**다음 단계로, 5주 일정의 구체적인 '주차별 스프린트 계획(Sprint Backlog)'과 각 단계별 '예상 산출물 리스트'를 상세히 정의해 드릴까요?**