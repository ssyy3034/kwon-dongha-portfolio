---
date: 2025-10-30
tags: [CS]
---

**디렉터리 스트림(Directory Stream)** 은 디렉터리 내의 항목들을 순차적으로 접근하기 위한 추상화된 데이터 흐름입니다. `opendir` 함수를 통해 생성됩니다.

- **함수:**
    
    - **`opendir(pathname)`**: 경로 이름을 받아 디렉터리 스트림을 열고, 스트림을 다루는 데 필요한 `DIR` 타입의 포인터를 반환합니다.
        
    - **`readdir(dirp)`**: `DIR` 포인터를 받아 스트림에서 다음 디렉터리 항목에 대한 정보를 담은 `dirent` 구조체 포인터를 반환합니다.
        
    - **`closedir(dirp)`**: 사용이 끝난 스트림을 닫고 자원을 해제합니다.
        
- **`dirent` 구조체:** `readdir`가 반환하는 구조체로, 파일의 핵심 정보를 포함합니다. 표준적으로 다음 두 멤버를 가집니다.
    
    - `d_ino`: 아이노드(inode) 번호. 파일의 고유 식별 번호입니다.
        
    - `d_name`: 파일 이름.
        
- **에러 처리:** `readdir`는 스트림의 끝에 도달했을 때와 실제 에러가 발생했을 때 모두 `NULL`을 반환합니다. 이 둘을 구별하는 유일한 방법은 `readdir`를 호출한 후 전역 변수 `errno`의 값이 변경되었는지 확인하는 것입니다.*