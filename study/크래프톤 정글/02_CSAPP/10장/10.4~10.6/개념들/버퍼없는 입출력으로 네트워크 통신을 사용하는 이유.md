---
date: 2025-10-30
tags: [Network]
---

### ### 1. 구조화된 데이터 또는 바이너리 데이터 수신 시

많은 네트워크 프로토콜은 "먼저 4바이트로 데이터 길이를 보내고, 그 길이만큼 실제 데이터를 보낸다"와 같이 엄격한 구조를 가집니다.

- **문제 상황:** 이 상황에서 `rio_readlineb`를 사용하면 심각한 오류가 발생합니다. 만약 실제 데이터(이미지, 실행 파일 등) 안에 우연히 개행 문자와 같은 값(0x0a)이 포함되어 있다면, 함수는 데이터의 중간에서 읽기를 멈춰버립니다.
    
- **올바른 방법:** `rio_readn`을 사용해야 합니다. 먼저 `rio_readn(fd, &length, 4)`로 정확히 4바이트를 읽어 길이를 알아내고, 그 다음 `rio_readn(fd, data, length)`로 해당 길이만큼의 데이터를 온전히 받아야 프로토콜이 정상적으로 동작합니다.
    

### ### 2. 언제 버퍼 있는 입력을 사용하는가?

`rio_readlineb`는 **HTTP 요청 헤더** 처럼 데이터가 명확하게 줄 단위로 구분되는 **텍스트 기반 프로토콜**을 처리할 때 매우 효율적이고 유용합니다. 각 헤더를 한 줄씩 빠르고 간단하게 읽어올 수 있기 때문입니다.

결론적으로, `rio_readn`은 **데이터의 완전성**을 보장해야 하는 모든 경우에 사용되는 범용적이고 안정적인 도구입니다. 반면, `rio_readlineb`는 **텍스트 라인**이라는 특정 형식을 효율적으로 처리하기 위한 특수 목적의 도구라고 할 수 있습니다.