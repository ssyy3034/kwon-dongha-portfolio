---
date: 2025-10-10
tags: [CS]
---


# ðŸ’¾ Chapter 6: The Memory Hierarchy (Part 1 â€” Storage Technologies & DMA)

---

## ðŸ“˜ 6.1 Storage Technologies

### ðŸ’¡ ê°œìš”

í˜„ëŒ€ ì‹œìŠ¤í…œì€ ë‹¤ì–‘í•œ **ì €ìž¥ìž¥ì¹˜(storage technologies)** ë¡œ êµ¬ì„±ëœë‹¤.
ê° ê¸°ìˆ ì€ **ì†ë„, ìš©ëŸ‰, ê°€ê²©, ë‚´êµ¬ì„±** ë©´ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ íŠ¹ì„±ì„ ê°€ì§„ë‹¤.
ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê²°í•©í•œ ê²ƒì´ **ë©”ëª¨ë¦¬ ê³„ì¸µ(memory hierarchy)** êµ¬ì¡°ë‹¤.

---

## ðŸ”¹ 6.1.1 Random Access Memory (RAM)

### âœ… ì¢…ë¥˜

- **SRAM (Static RAM)**
    
    - ë¹ ë¥´ê³  ë¹„ìŒˆ
        
    - **CPU ìºì‹œ(Cache Memory)** ì— ì‚¬ìš©
        
    - íŠ¸ëžœì§€ìŠ¤í„° 6ê°œë¡œ êµ¬ì„±ëœ **bistable cell**
        
    - ë¦¬í”„ë ˆì‹œ ë¶ˆí•„ìš”, ì „ì›ì´ ìœ ì§€ë˜ëŠ” ë™ì•ˆ ê°’ ë³´ì¡´
        
- **DRAM (Dynamic RAM)**
    
    - ëŠë¦¬ì§€ë§Œ ì €ë ´í•˜ê³  ê³ ë°€ë„
        
    - **ë©”ì¸ ë©”ëª¨ë¦¬(Main Memory)** ë¡œ ì‚¬ìš©
        
    - **1T1C êµ¬ì¡°(íŠ¸ëžœì§€ìŠ¤í„°+ìºíŒ¨ì‹œí„°)**
        
    - ì¼ì • ì£¼ê¸°ë¡œ **ë¦¬í”„ë ˆì‹œ(refresh)** í•„ìš”
        

---

### ðŸ§© DRAM êµ¬ì¡° ì‹¬í™”

#### **Cell â†’ Supercell â†’ Chip â†’ Module**

1. **DRAM Cell**
    
    - 1ë¹„íŠ¸ ì €ìž¥
        
    - íŠ¸ëžœì§€ìŠ¤í„° 1ê°œ + ìºíŒ¨ì‹œí„° 1ê°œ (1T1C)
        
    - ì „í•˜ê°€ ìƒˆë¯€ë¡œ ì£¼ê¸°ì ìœ¼ë¡œ ë¦¬í”„ë ˆì‹œ í•„ìš”
        
2. **Supercell**
    
    - ì—¬ëŸ¬ cellì„ ë¬¶ì€ ë‹¨ìœ„ (ë³´í†µ 8ë¹„íŠ¸ ì´ìƒ)
        
    - í•œ ë²ˆì— ë³‘ë ¬ ì ‘ê·¼ ê°€ëŠ¥ â†’ ë‹¨ì–´(word) ë‹¨ìœ„ ì½ê¸°
        
3. **DRAM Chip**
    
    - ìˆ˜ì²œ~ìˆ˜ë°±ë§Œ ê°œì˜ supercellë¡œ êµ¬ì„±ëœ ì €ìž¥ ì¹©
        
    - í–‰(row)ê³¼ ì—´(column) ì£¼ì†Œë¡œ ì ‘ê·¼ (RAS, CAS ì‹ í˜¸ ì‚¬ìš©)
        
4. **Memory Module (DIMM)**
    
    - ì—¬ëŸ¬ DRAM ì¹©ì„ ë³‘ë ¬ë¡œ ì—°ê²°í•´ **CPU ë²„ìŠ¤ í­(ì˜ˆ: 64bit)** ì— ë§žì¶¤
        
    - ì˜ˆ: 8bit ì¹© Ã— 8ê°œ = 64bit ë°ì´í„° ë²„ìŠ¤
        
    - ë©”ëª¨ë¦¬ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°ì´í„° ë¶„í• Â·ë³‘í•© ë‹´ë‹¹
        

```
CPU â”€ Memory Controller â”€ DIMM
      â””â”€ DRAM Chip Ã— 8 (ê° 8bit)
```

---

### ðŸ§  DRAMì˜ ë‚´ë¶€ ë™ìž‘

1. CPUê°€ ì£¼ì†Œë¥¼ ë©”ëª¨ë¦¬ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬
    
2. ì»¨íŠ¸ë¡¤ëŸ¬ê°€ **í–‰(row)** ì„ íƒ â†’ wordline í™œì„±í™”
    
3. **ìŠˆí¼ì…€(supercell)** ë‹¨ìœ„ë¡œ ë°ì´í„° ì½ê¸°
    
4. ì—´(column) ì£¼ì†Œë¥¼ ì„ íƒí•´ ì›í•˜ëŠ” ë¹„íŠ¸ë§Œ ì „ë‹¬
    
5. I/O ë²„ìŠ¤ë¥¼ í†µí•´ CPUë¡œ ì „ì†¡
    

---

### ðŸ”¸ DRAM ë°œì „í˜•

- **FPM, EDO DRAM** â†’ SDRAM â†’ DDR / DDR2 / DDR3 / DDR4
    
- SDRAM: ì‹œìŠ¤í…œ í´ëŸ­ê³¼ ë™ê¸°í™”
    
- DDR: í´ëŸ­ì˜ ìƒìŠ¹/í•˜ê°• ì—£ì§€ ëª¨ë‘ ì‚¬ìš©í•´ ì†ë„ 2ë°°
    

---

## ðŸ”¹ 6.1.2 Nonvolatile Memory

- ì „ì›ì´ êº¼ì ¸ë„ ë°ì´í„° ìœ ì§€
    
- ì¢…ë¥˜:
    
    - **ROM / PROM / EPROM / EEPROM**
        
    - **Flash Memory (NAND/NOR)**: SSDì˜ í•µì‹¬ ê¸°ë°˜ ê¸°ìˆ 
        
- FlashëŠ” page ë‹¨ìœ„ ì“°ê¸°, block ë‹¨ìœ„ ì§€ì›€
    ì‹œìŠ¤í…œ ë²„ìŠ¤,ë©”ëª¨ë¦¬ ë²„ìŠ¤,i/oë¸Œë¦¿ì§€ ì—°ê²° ë° í†µì‹  í”„ë¡œí† ì½œ

---

## ðŸ”¹ 6.1.3 Magnetic Disk Storage

### âš™ï¸ ë¬¼ë¦¬ êµ¬ì¡° (3D)

- **í”Œëž˜í„°(Platter)**: ìžì„± ë¬¼ì§ˆ ì½”íŒ…ëœ ì›íŒ
    
- **íŠ¸ëž™(Track)**: í”Œëž˜í„°ì˜ ë™ì‹¬ì› ê¶¤ë„
    
- **ì„¹í„°(Sector)**: íŠ¸ëž™ì„ ë‚˜ëˆˆ ì¡°ê° (ë³´í†µ 512B)
    
- **ì‹¤ë¦°ë”(Cylinder)**: ì—¬ëŸ¬ í”Œëž˜í„°ì—ì„œ ê°™ì€ ë°˜ì§€ë¦„ì˜ íŠ¸ëž™ ì§‘í•©
    

â†’ ì¦‰, ë°ì´í„°ëŠ” **(í”Œëž˜í„°, íŠ¸ëž™, ì„¹í„°)** ë¼ëŠ” 3D ì¢Œí‘œë¡œ ì €ìž¥ë¨.

---

### ðŸ’¡ ë…¼ë¦¬ì  ë””ìŠ¤í¬ ë¸”ë¡ (Logical Disk Block)

OSëŠ” ì´ë ‡ê²Œ ë³µìž¡í•œ êµ¬ì¡°ë¥¼ ëª°ë¼ë„ ëœë‹¤.  
ëŒ€ì‹  **ë””ìŠ¤í¬ë¥¼ 0 ~ Nâˆ’1ë²ˆê¹Œì§€ì˜ â€œë…¼ë¦¬ ë¸”ë¡(logical block)â€** ë°°ì—´ë¡œ ë³¸ë‹¤.

```
ë…¼ë¦¬ì  ë·°(OS ê´€ì ): [Block 0][Block 1][Block 2]...[Block N-1]
ë¬¼ë¦¬ì  ë·°(ë””ìŠ¤í¬ ê´€ì ): (í”Œëž˜í„°, íŠ¸ëž™, ì„¹í„°)
```

- ì´ ë³€í™˜ì€ **ë””ìŠ¤í¬ ì»¨íŠ¸ë¡¤ëŸ¬(firmware)** ê°€ ìˆ˜í–‰í•œë‹¤.
    
- ì¦‰, **OSëŠ” ì„ í˜• ë°°ì—´ì²˜ëŸ¼ ì ‘ê·¼**,  
    ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë‚´ë¶€ì ìœ¼ë¡œ **3ì°¨ì› ì£¼ì†Œë¡œ ë³€í™˜.**
    

> âœ… ë¬¼ë¦¬ì ìœ¼ë¡œëŠ” 3D, ë…¼ë¦¬ì ìœ¼ë¡œëŠ” 1D ì„ í˜• ê³µê°„.

---

### âš™ï¸ ë””ìŠ¤í¬ ì ‘ê·¼ ì‹œê°„ êµ¬ì„±

1. **Seek Time** â€” í—¤ë“œë¥¼ ëª©í‘œ íŠ¸ëž™ìœ¼ë¡œ ì´ë™ (3~9ms)
    
2. **Rotational Latency** â€” í”Œëž˜í„° íšŒì „ìœ¼ë¡œ ì„¹í„° ì •ë ¬ ëŒ€ê¸°
    
3. **Transfer Time** â€” ì‹¤ì œ ë°ì´í„° ì „ì†¡
    

---

## ðŸ”¹ 6.1.4 Solid State Disk (SSD)

- **Flash memory ê¸°ë°˜ ì €ìž¥ìž¥ì¹˜**
    
- íšŒì „ ë¶€í’ˆì´ ì—†ê³  ë¹ ë¦„ (Î¼s ë‹¨ìœ„ ì ‘ê·¼)
    
- ë‚´ë¶€ì— **Flash Translation Layer (FTL)** ì¡´ìž¬  
    â†’ ë…¼ë¦¬ ë¸”ë¡ â†” ë¬¼ë¦¬ ë¸”ë¡ ë§¤í•‘ ìˆ˜í–‰
    
- ì“°ê¸° ì„±ëŠ¥ â†“ / ì½ê¸° ë¹ ë¦„
    
- **Wear-leveling** ìœ¼ë¡œ ìˆ˜ëª… ê´€ë¦¬
    

---

## ðŸ”¹ 6.1.5 Storage Technology Trends

|ê¸°ìˆ |ì†ë„|ìš©ëŸ‰|ë¹„íŠ¸ë‹¹ ê°€ê²©|ìš©ë„|
|---|---|---|---|---|
|**SRAM**|ë§¤ìš° ë¹ ë¦„|ìž‘ìŒ|ë§¤ìš° ë¹„ìŒˆ|CPU ìºì‹œ|
|**DRAM**|ë¹ ë¦„|ì¤‘ê°„|ì¤‘ê°„|ë©”ì¸ ë©”ëª¨ë¦¬|
|**SSD**|ë³´í†µ|í¼|ì¤‘ê°„~ë¹„ìŒˆ|ê³ ì„±ëŠ¥ ì €ìž¥ìž¥ì¹˜|
|**HDD**|ëŠë¦¼|ë§¤ìš° í¼|ë§¤ìš° ìŒˆ|ëŒ€ìš©ëŸ‰ ë³´ì¡° ì €ìž¥ì†Œ|

> ìš©ëŸ‰ì€ ê¾¸ì¤€ížˆ ì¦ê°€í•˜ì§€ë§Œ, **ì†ë„ í–¥ìƒì€ í•œê³„ì— ê°€ê¹Œì›€**.  
> ì´ ê²©ì°¨ë¥¼ ë©”ìš°ê¸° ìœ„í•´ **ë©”ëª¨ë¦¬ ê³„ì¸µ êµ¬ì¡°**ê°€ ë°œì „í–ˆë‹¤.

---

# âš™ï¸ 6.2 DMA (Direct Memory Access)

## ðŸ’¡ ê°œë…

**DMA**ëŠ” CPUê°€ ì¼ì¼ì´ ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ì§€ ì•Šê³   
**I/O ìž¥ì¹˜ê°€ ë©”ëª¨ë¦¬ì— ì§ì ‘ ì ‘ê·¼í•˜ë„ë¡ í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜**ì´ë‹¤.

â†’ CPUëŠ” â€œì´ ì£¼ì†Œë¡œ ì´ë§Œí¼ ì˜®ê²¨ë¼â€ë§Œ ëª…ë ¹í•˜ê³ ,  
ë‚˜ë¨¸ì§€ëŠ” DMA ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì²˜ë¦¬í•œë‹¤.

---

## ðŸ”¹ DMA ë™ìž‘ ê³¼ì •

1. **CPUê°€ DMA ìš”ì²­ ì„¤ì •**
    
    - ì†ŒìŠ¤ ì£¼ì†Œ, ëª©ì ì§€ ì£¼ì†Œ, ì „ì†¡ í¬ê¸°, ë°©í–¥ ì„¤ì •
        
2. **DMA ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë²„ìŠ¤ ì œì–´ê¶Œ íšë“ (bus mastering)**
    
3. **DMAê°€ ìž¥ì¹˜ â†” ë©”ëª¨ë¦¬ ê°„ ì§ì ‘ ì „ì†¡**
    
4. **ì „ì†¡ ì™„ë£Œ ì‹œ DMAê°€ ì¸í„°ëŸ½íŠ¸ ë°œìƒ**
    
5. **CPUê°€ ê²°ê³¼ í™•ì¸ í›„ í›„ì† ìž‘ì—… ìˆ˜í–‰**
    

---

## ðŸ”¹ DMA Bus ì ‘ê·¼ ëª¨ë“œ

|ëª¨ë“œ|ì„¤ëª…|CPU ì˜í–¥|
|---|---|---|
|**Cycle Stealing**|CPUê°€ ë²„ìŠ¤ë¥¼ ì•ˆ ì“°ëŠ” ìˆœê°„ë§Œ DMA ì‚¬ìš©|ë§¤ìš° ì ìŒ|
|**Burst Mode**|DMAê°€ ì—°ì† ì‚¬ì´í´ ì ìœ |CPU ë²„ìŠ¤ ì ‘ê·¼ ì¼ì‹œ ì¤‘ë‹¨|
|**Transparent Mode**|CPUê°€ ì™„ì „ížˆ ë†€ ë•Œë§Œ DMA ìˆ˜í–‰|ëŠë¦¬ì§€ë§Œ ì•ˆì „|

---

## ðŸ”¹ CPUì™€ DMAì˜ ê´€ê³„

- DMAê°€ ë²„ìŠ¤ ì ìœ  ì¤‘ì´ë©´ CPUëŠ” **ë©”ëª¨ë¦¬ ì ‘ê·¼ ë¶ˆê°€**
    
- í•˜ì§€ë§Œ **ë ˆì§€ìŠ¤í„° ì—°ì‚°, ìºì‹œ ì ‘ê·¼**ì€ ê°€ëŠ¥
    
- CPUëŠ” ë²„ìŠ¤ ì‘ë‹µì´ ì—†ìœ¼ë©´ **ìžë™ stall(ëŒ€ê¸°)** ë°œìƒ
    
- **ë²„ìŠ¤ ì¤‘ìž¬ê¸°(bus arbiter)** ê°€ CPUì™€ DMAì˜ ì ‘ê·¼ íƒ€ì´ë°ì„ ìžë™ ì¡°ì •í•¨
    

> âš™ï¸ CPUëŠ” ë©ˆì¶”ëŠ” ê²Œ ì•„ë‹ˆë¼ â€œê¸°ë‹¤ë¦°ë‹¤.â€  
> í•˜ë“œì›¨ì–´ê°€ íŒë‹¨í•´ ìžë™ìœ¼ë¡œ stall/resume ì²˜ë¦¬.

---

## ðŸ”¹ OSì˜ ì—­í• 

- OSëŠ” **DMA ì„¤ì •ê³¼ ì™„ë£Œ í›„ ì²˜ë¦¬ë§Œ** ìˆ˜í–‰
    
- ë²„ìŠ¤ ì œì–´ëŠ” **í•˜ë“œì›¨ì–´ê°€ ìžë™ ì²˜ë¦¬**
    
- DMA ì™„ë£Œ ì‹œ ì¸í„°ëŸ½íŠ¸ë¥¼ ë°›ì•„ ì»¤ë„ì´ í›„ì† ë™ìž‘ ì‹¤í–‰
    

|ì£¼ì²´|ì—­í• |ë²„ìŠ¤ ì œì–´|
|---|---|---|
|**OS**|DMA ìš”ì²­ ì„¸íŒ… / ì™„ë£Œ ì²˜ë¦¬|âŒ|
|**DMA Controller**|ë°ì´í„° ì „ì†¡ / ë²„ìŠ¤ ì ìœ |âœ…|
|**Bus Arbiter**|CPU â†” DMA ì¡°ì •|âœ…|
|**CPU**|ì—°ì‚° / ì¸í„°ëŸ½íŠ¸ ì²˜ë¦¬|ìžë™ stall/resume|

---

## ðŸ”¹ CPUëŠ” â€˜ë²„ìŠ¤ í•„ìš” ì—¬ë¶€â€™ë¥¼ ì–´ë–»ê²Œ ì•„ëŠ”ê°€?

CPUëŠ” ëª…ë ¹ ì‹¤í–‰ ì‹œ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ê±°ì¹œë‹¤:

```
Fetch â†’ Decode â†’ Execute â†’ Memory â†’ Writeback
```

- **Decode ë‹¨ê³„ì—ì„œ ì´ë¯¸ ëª…ë ¹ì˜ ìžì› ì¢…ë¥˜ë¥¼ íŒë³„**
    
- Memory ë‹¨ê³„ë¥¼ ì“°ëŠ” ëª…ë ¹(LOAD, STORE)ë§Œ ë²„ìŠ¤ ìš”ì²­ ì‹ í˜¸ ìƒì„±
    

|ëª…ë ¹|ì˜ë¯¸|ë²„ìŠ¤ í•„ìš”|
|---|---|---|
|`ADD R1, R2, R3`|R1 = R2 + R3|âŒ|
|`MUL R1, R2, R3`|ê³±ì…ˆ|âŒ|
|`LOAD R1, [R2]`|ë©”ëª¨ë¦¬ ì½ê¸°|âœ…|
|`STORE [R1], R2`|ë©”ëª¨ë¦¬ ì“°ê¸°|âœ…|

â†’ DMA ì ìœ  ì¤‘ì´ë©´ Memory Stageì—ì„œ stall,  
ALU ì—°ì‚°ì€ ê³„ì† ìˆ˜í–‰ ê°€ëŠ¥.

---

# âœ… í•µì‹¬ ì •ë¦¬

|ê°œë…|ì„¤ëª…|
|---|---|
|**Supercell**|ì—¬ëŸ¬ DRAM cellì„ ë¬¶ì€ ë³‘ë ¬ ì ‘ê·¼ ë‹¨ìœ„|
|**Memory Module**|ì—¬ëŸ¬ DRAM ì¹©ì„ ë³‘ë ¬ë¡œ ë¬¶ì–´ CPU ë²„ìŠ¤ í­ ë§žì¶¤|
|**Logical Disk Block**|OSê°€ ë³´ëŠ” 1D ë¸”ë¡ ë°°ì—´ (ë¬¼ë¦¬ì  3D êµ¬ì¡°ë¥¼ ì¶”ìƒí™”)|
|**DMA**|CPU ê°œìž… ì—†ì´ ë©”ëª¨ë¦¬ â†” I/O ìž¥ì¹˜ ê°„ ì „ì†¡|
|**Bus Arbitration**|CPUì™€ DMAì˜ ë²„ìŠ¤ ì ‘ê·¼ ì¶©ëŒ ìžë™ ì¡°ì •|
|**CPU Stall**|DMA ì ìœ  ì¤‘ ë©”ëª¨ë¦¬ ì ‘ê·¼ ëŒ€ê¸°|
|**OS ì—­í• **|DMA ì„¤ì • ë° ì¸í„°ëŸ½íŠ¸ ì²˜ë¦¬|
|**CPU íŒë‹¨ ë°©ì‹**|ëª…ë ¹ì–´ ë””ì½”ë”© ì‹œ ë©”ëª¨ë¦¬ ì ‘ê·¼ ì—¬ë¶€ í•˜ë“œì›¨ì–´ê°€ ìžë™ ì¸ì‹|

---

# ðŸ’¬ ê²°ë¡ 

> - **OSëŠ” DMAë¥¼ ì§ì ‘ í†µì œí•˜ì§€ ì•ŠëŠ”ë‹¤.**
>     
> - **ë²„ìŠ¤ ì ‘ê·¼ ì¡°ì •ì€ ì „ì ìœ¼ë¡œ í•˜ë“œì›¨ì–´ê°€ ë‹´ë‹¹í•œë‹¤.**
>     
> - **CPUëŠ” ëª…ë ¹ ë””ì½”ë”© ë‹¨ê³„ì—ì„œ ë©”ëª¨ë¦¬ ì ‘ê·¼ ì—¬ë¶€ë¥¼ ìžë™ íŒë‹¨**í•œë‹¤.
>     
> - DMA ìˆ˜í–‰ ì¤‘ì—ë„ CPUëŠ” ìºì‹œÂ·ë ˆì§€ìŠ¤í„° ì—°ì‚°ì„ ê³„ì† ìˆ˜í–‰í•  ìˆ˜ ìžˆë‹¤.
>     
> - ì´ ëª¨ë“  ê²ƒì€ í•˜ë“œì›¨ì–´ ìˆ˜ì¤€ì—ì„œ **ìžë™Â·ë³‘ë ¬ì ìœ¼ë¡œ ì¼ì–´ë‚œë‹¤.**
>     
